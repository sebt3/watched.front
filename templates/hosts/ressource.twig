{% extends "core.twig" %}
{% block title %}{{ _('Ressource') }} {{ a.host }} - {{ r.name }}  {% endblock %}
{% block contentHeader %}
        {{ _('Ressource') }}
        <small>{{ _('on') }} {{ a.host }} : {{ r.name }} </small>
{% endblock %}
{% block scripts %}
<script>
{% if monit %}
d3.select('section.content').call(wdRow()
	.cell('col-md-3', wdDonutWidget().source("{{ path_for('widgets.donut.ress.status',  { 'host_id': a.id, 'res_id': r.id }) }}"))
	.cell('col-md-6', wdTableWidget().source("{{ path_for('widgets.table.ress.history',  { 'host_id': a.id, 'res_id': r.id }) }}"))
	.cell('col-md-3', wdDonutWidget().source("{{ path_for('widgets.donut.ress.items',  { 'host_id': a.id, 'res_id': r.id }) }}")));
{% endif %}
chart = wdLineChart().baseUrl("{{ path_for('apiRessource', { 'aid': a.id, 'rid': r.id, 'name': r.type }) }}");
d3.select('section.content').call(wdBox().title("{{ _('Graphics') }}")
	.tool(wdDropButton().text('Period')
		.item("{{ _('All') }}", 'chart.setPeriod("all")')
		.item("{{ _('Last month') }}", 'chart.setPeriod("month")')
		.item("{{ _('Last week') }}", 'chart.setPeriod("week")')
		.item("{{ _('Yesterday') }}", 'chart.setPeriod("yesterday")')
		.item("{{ _('Today') }}", 'chart.setPeriod("today")')
		.item("{{ _('Last hour') }}", 'chart.setPeriod("hour")')
	).body(chart));
</script>
{% endblock %}
