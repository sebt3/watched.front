{% extends "core.twig" %}
{% block title %}Users - Modify{% endblock %}
{% block contentHeader %}
        Users
        <small>modify a user</small>
{% endblock %}
{% block content %}
      <div class="row">
        <div class="col-md-6">
          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">Modify a user</h3>
            </div>
	    <form class="form-horizontal" action="{{ path_for('admin.users.change', {'id': user_id}) }}" method="post">
              <div class="box-body">

                <div class="form-group">
                  <label for="username" class="col-sm-2 control-label">Username</label>

                  <div class="col-sm-10">
                    <input type="username" class="form-control" id="username" name="username" placeholder="Username" {% if username %} value="{{username}}" {% endif %}>
                  </div>
                </div>

                <div class="form-group">
                  <label for="firstname" class="col-sm-2 control-label">First name</label>

                  <div class="col-sm-10">
                    <input class="form-control" id="firstname" name="firstname" placeholder="First name"{% if firstname %} value="{{firstname}}" {% endif %}>
                  </div>
                </div>

                <div class="form-group">
                  <label for="lastname" class="col-sm-2 control-label">Last name</label>

                  <div class="col-sm-10">
                    <input class="form-control" id="lastname" name="lastname" placeholder="Last name"{% if username %} value="{{lastname}}" {% endif %}>
                  </div>
                </div>

		<div class="form-group">
                  <label for="password" class="col-sm-2 control-label">Password</label>

                  <div class="col-sm-10">
                    <input type="password" class="form-control" id="password" name="password" placeholder="Password" {% if password %} value="{{password}}" {% endif %}>
                  </div>
                </div>
              </div>
              <div class="box-footer">
                <a href="{{ path_for('admin.users.list') }}" class="btn btn-default"><i class="fa fa-arrow-left" aria-hidden="true"></i> Cancel</a>
                <button type="submit" class="btn btn-info pull-right"><i class="fa fa-pencil"></i> update</button>
              </div>
            </form>
          </div>
          <div class="box box-normal">
            <div class="box-header with-border">
              <h3 class="box-title">Properties</h3>
	      <a class="btn btn-default btn-flat pull-right" href="{{ path_for('admin.users.addProp', { 'id': user_id }) }}">
		<i class="fa fa-plus" aria-hidden="true"></i> Add
	      </a>
            </div>
              <div class="box-body table-responsive">
	      <table class="table table-striped table-hover">
	      <thead><tr>
               <th>Name</th>
               <th>Value</th>
               <th class='pull-right'>actions</th>
	      </tr></thead><tbody>
    {% for a in properties %}
               <tr>
		<td><a href="{{ path_for('admin.users.changeProp', { 'id': user_id, 'pid': a.id  }) }}">{{ a.name }}</a></td>
		<td><a href="{{ path_for('admin.users.changeProp', { 'id': user_id, 'pid': a.id }) }}">{{ a.value }}</a></td>
                <td class='pull-right'><a href="{{ path_for('admin.users.changeProp', { 'id': user_id, 'pid': a.id }) }}"><i class="fa fa-wrench"></i></a>&nbsp;
		    <a data-toggle="modal" data-target="#deleteProp{{ user_id }}-{{ a.id }}"><i class="fa fa-trash"></i></a>
<div class="modal fade modal-warning" id="deleteProp{{ user_id }}-{{ a.id }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Remove {{ a.name }} property from {{ first_name }} {{ last_name }}</h4>
      </div>
      <div class="modal-body">
	      <p>Are you sure you want to remove {{ a.name }} property from {{ first_name }} {{ last_name }} :</p>
	      <div class="row">
		<div class="col-md-2"><strong class='pull-right'>Property</strong></div>
		<div class="col-md-10">{{ a.name }}</div>
	      </div>
	      <div class="row">
		<div class="col-md-2"><strong class='pull-right'>Value</strong></div>
		<div class="col-md-10">{{ a.value }}</div>
	      </div>
      </div>
      <div class="modal-footer">
	<form action="{{ path_for('admin.users.deleteProp', { 'id': user_id, 'pid': a.id }) }}" method="post">
          <button type="submit" class="btn btn-outline">Confirm</button>
	</form>
      </div>
    </div>
  </div>
</div>
		</td>
               </tr>
    {% endfor %}
	      </tbody>
	     </table>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-6">
          <div class="box box-normal">
            <div class="box-header with-border">
              <h3 class="box-title">Teams</h3>
	      <a class="btn btn-default btn-flat pull-right" href="{{ path_for('admin.users.addTeam', {'id': user_id}) }}">
		<i class="fa fa-plus" aria-hidden="true"></i> Add
	      </a>
            </div>
              <div class="box-body table-responsive">
	      <table class="table table-striped table-hover">
	      <thead><tr>
               <th>name</th>
               <th class='pull-right'>actions</th>
	      </tr></thead><tbody>
    {% for a in teams %}
               <tr>
		<td>{{ a.name }}</td>
                <td class='pull-right'><a data-toggle="modal" data-target="#deleteTeam{{ user_id }}-{{ a.id }}"><i class="fa fa-trash"></i></a>
<div class="modal fade modal-warning" id="deleteTeam{{ user_id }}-{{ a.id }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Remove this team from the {{ firstname }} {{ lastname }} user</h4>
      </div>
      <div class="modal-body">
	      <p>Are you sure you want to remove this team from the {{ firstname }} {{ lastname }} user :</p>
	      <p>{{ a.name }}</p>
      </div>
      <div class="modal-footer">
	<form action="{{ path_for('admin.users.deleteTeam', { 'id': user_id, 'tid': a.id }) }}" method="post">
          <button type="submit" class="btn btn-outline">Confirm</button>
	</form>
      </div>
    </div>
  </div>
</div>
		</td>
               </tr>
    {% endfor %}
	      </tbody>
	     </table>
              </div>
            </form>
          </div>
        </div>
{% endblock %}
