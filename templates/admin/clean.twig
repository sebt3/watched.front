{% extends "core.twig" %}
{% block title %}Clean{% endblock %}
{% block contentHeader %}
        Clean
        <small>up old services and hosts</small>
{% endblock %}
{% block content %}
      <div class="row">
        <div class="col-md-6">
          <div class="box box-normal">
            <div class="box-header with-border">
              <h3 class="box-title">Services</h3>
            </div>
              <div class="box-body table-responsive">
	      <table class="table table-striped table-hover">
	      <thead><tr>
               <th>Domain</th>
               <th>Host</th>
               <th>Service</th>
               <th class='pull-right'>actions</th>
	      </tr></thead><tbody>
    {% for a in services %}
               <tr>
		<td>{{ a.domain_name }}</td>
		<td>{{ a.host_name }}</td>
		<td>{{ a.name }}</td>
                <td class='pull-right'><a data-toggle="modal" data-target="#deleteServ{{ a.id }}"><i class="fa fa-trash"></i></a>
<div class="modal fade modal-warning" id="deleteServ{{ a.id }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Remove old {{ name }} service</h4>
      </div>
      <div class="modal-body">
	      <p>Are you sure you want to remove this old {{ a.name }} service :</p>
	      <div class="row">
		<div class="col-md-2"><strong class='pull-right'>Domain</strong></div>
		<div class="col-md-10">{{ a.domain_name }}</div>
	      </div>
	      <div class="row">
		<div class="col-md-2"><strong class='pull-right'>Host</strong></div>
		<div class="col-md-10">{{ a.host_name }}</div>
	      </div>
	      <div class="row">
		<div class="col-md-2"><strong class='pull-right'>Service</strong></div>
		<div class="col-md-10">{{ a.name }}</div>
	      </div>
      </div>
      <div class="modal-footer">
	<p class='pull-left'><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> All related data will be purged</p>
	<form action="{{ path_for('admin.clean.deleteService', { 'id': a.id }) }}" method="post">
          <button type="submit" class="btn btn-outline">Confirm</button>
	</form>
      </div>
    </div>
  </div>
</div>
		</td>
               </tr>
    {% endfor %}
	      </tbody>
	     </table>
              </div>
            </form>
          </div>
        </div>
        <div class="col-md-6">
          <div class="box box-normal">
            <div class="box-header with-border">
              <h3 class="box-title">Hosts</h3>
            </div>
              <div class="box-body table-responsive">
	      <table class="table table-striped table-hover">
	      <thead><tr>
               <th>Domain</th>
               <th>Host</th>
               <th class='pull-right'>actions</th>
	      </tr></thead><tbody>
    {% for a in hosts %}
               <tr>
		<td>{{ a.domain_name }}</td>
		<td>{{ a.name }}</td>
                <td class='pull-right'><a data-toggle="modal" data-target="#deleteHost{{ a.id }}"><i class="fa fa-trash"></i></a>
<div class="modal fade modal-warning" id="deleteHost{{ a.id }}" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Delete old {{ name }} host</h4>
      </div>
      <div class="modal-body">
	      <p>Are you sure you want to delete this host :</p>
	      <p>{{ a.name }}</p>
      </div>
      <div class="modal-footer">
	<p class='pull-left'><i class="fa fa-exclamation-triangle" aria-hidden="true"></i> All related data will be purged</p>
	<form action="{{ path_for('admin.domains.deleteHost', { 'id': domain_id, 'hid': a.id }) }}" method="post">
          <button type="submit" class="btn btn-outline">Confirm</button>
	</form>
      </div>
    </div>
  </div>
</div>
		</td>
               </tr>
    {% endfor %}
	      </tbody>
	     </table>
              </div>
            </form>
          </div>
        </div>
      </div>
{% endblock %}

