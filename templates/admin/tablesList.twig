{% extends "core.twig" %}
{% block title %}{{ _('Tables') }}{% endblock %}
{% block contentHeader %}
        {{ _('Tables') }}
        <small>{{ _('management') }}</small>
{% endblock %}
{% block content %}
      <div class="row">
        <div class="col-md-12">
          <div class="box box-normal">
            <div class="box-header with-border">
              <h3 class="box-title">{{ _('Tables') }}</h3>
            </div>
              <div class="box-body table-responsive">
	      <table class="table table-striped table-hover" id="sort">
	      <thead><tr>
               <th class="sortable">{{ _('Table') }}</th>
               <th class="sortable">{{ _('Size') }}</th>
               <th class="sortable">{{ _('Host cardinality') }}</th>
               <th class="sortable">{{ _('Service cardinality') }}</th>
               <th class="sortable">{{ _('Ressource cardinality') }}</th>
               <th class="sortable">{{ _('Rows') }}</th>
               <th class='pull-right'>{{ _('actions') }}</th>
	      </tr></thead><tbody>
	      </tbody>
	     </table>
            </div>
          </div>
        </div>
      </div>
{% endblock %}
{% block scripts %}
<script src="/js/watched.tables.js"></script>
<script>
  myTable = watchedTable("sort", [
    {% for a in tables %}
      {
	name:	"{{ a.data_type }}",
	total:	{{ a.total_size }},
	host:	{% if a.host_card %}{{ a.host_card }}{% else %}null{% endif %},
	serv:	{% if a.serv_card %}{{ a.serv_card }}{% else %}null{% endif %},
	res:	{{ a.res_card }},
	rows:	{{ a.data_rows+a.min_rows+a.hour_rows+a.days_rows }},
	actions: [ { icon:"fa fa-cogs", url: "{{ path_for('admin.tables.edit', { 'name': a.data_type }) }}" } ]
      },
    {% endfor %}
  ]);
</script>
{% endblock %}
